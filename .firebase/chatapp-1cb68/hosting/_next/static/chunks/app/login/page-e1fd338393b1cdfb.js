(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5732:function(e,t,s){Promise.resolve().then(s.bind(s,5207))},5207:function(e,t,s){"use strict";s.r(t);var a=s(7437),l=s(2265),n=s(1883),r=s(5735),o=s(6463),i=s(6648),c=s(516),d=s(7138);t.default=()=>{let[e,t]=(0,l.useState)({email:"",password:""}),[s,u]=(0,l.useState)({email:"",password:""}),x=(0,o.useRouter)(),m=(e,t)=>{(0,c.Vx)((0,c.iH)(n.db,"users/"+e.uid),{online:t})},f=e=>{let t=(0,c.iH)(n.db,"messages/".concat(e.uid));(0,c.jM)(t,t=>{let s=t.val();s&&Object.keys(s).forEach(t=>{Object.keys(s[t]).forEach(a=>{let l=(0,c.iH)(n.db,"users/".concat(t,"/online"));(0,c.jM)(l,l=>{let r=l.val();!s[t][a].delivered&&r&&(0,c.Vx)((0,c.iH)(n.db,"messages/".concat(e.uid,"/").concat(t,"/").concat(a)),{delivered:!0})})})})})},p=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},h=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),b=async t=>{if(t.preventDefault(),!h(e.email)){u(e=>({...e,email:"Invalid email address"}));return}if(e.password.length<6){u(e=>({...e,password:"Password should be at least 6 characters"}));return}try{let t=await (0,r.e5)(n.I8,e.email,e.password);m(t.user,!0),f(t.user),t.user&&x.push("/")}catch(e){console.log("Login ERROR",e),u(e=>({...e,email:"Invalid email or password",password:"Invalid email or password"}))}},g=async e=>{e.preventDefault();try{let e=await (0,r.rh)(n.I8,n.Vv);m(e.user,!0),f(e.user),e.user&&x.push("/")}catch(e){console.log("Login ERROR",e)}};return(0,a.jsxs)("div",{className:"bg-grey-lighter min-h-screen flex lg:flex-row bg-sky-50 flex-col-reverse ",children:[(0,a.jsx)("div",{className:"flex justify-center items-center max-lg:hidden w-full lg:w-[50%] bg-slate-900",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(i.default,{unoptimized:!0,width:50,height:50,className:"w-full cursor-pointer",alt:"gif",src:"/gifimg.gif"})})}),(0,a.jsxs)("div",{className:"container flex-1 max-w-md mx-auto flex flex-col items-center justify-center px-2",children:[(0,a.jsx)("h1",{className:"text-neutral-900 text-4xl mb-4 text-start w-full font-bold font-['Open Sans']",children:"Welcome Back!"}),(0,a.jsxs)("div",{className:"w-full flex flex-col",children:[(0,a.jsx)("label",{className:"text-neutral-600 text-base font-normal font-['Open Sans']",children:"Email Address"}),(0,a.jsx)("input",{type:"text",className:"block text-black text-lg border-grey-light w-full p-2 px-4 rounded-[7px] border border-neutral-400 ".concat(s.email&&"border-red-500"),name:"email",placeholder:"Enter Valid Email",value:e.email,onChange:p}),(0,a.jsx)("p",{className:"text-red-500 min-h-6 text-sm",children:null==s?void 0:s.email})]}),(0,a.jsxs)("div",{className:"relative w-full flex flex-col",children:[(0,a.jsx)("label",{className:"text-neutral-600 text-base font-normal font-['Open Sans']",children:"Password"}),(0,a.jsx)("input",{type:"password",className:"block text-black text-lg border-grey-light w-full p-2 px-4 rounded-[7px] border border-neutral-400 ".concat(s.password&&"border-red-500"),name:"password",placeholder:"Enter Password",value:e.password,onChange:p}),(0,a.jsx)("p",{className:"text-red-500 text-sm min-h-6",children:null==s?void 0:s.password})]}),(0,a.jsxs)("div",{className:"w-full mt-4 max-w-[450px] text-center",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-base font-normal font-['Inter']",children:"By logging in you agree with"}),(0,a.jsxs)("span",{className:"text-blue-600 text-base font-normal font-['Inter']",children:[" ","terms and conditions"]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full text-center py-3 my-5 text-white rounded bg-slate-800 text-xl font-normal font-['Inter'] hover:scale-105 transition-all focus:outline-none",onClick:b,children:"Log in"}),(0,a.jsxs)("div",{className:"flex w-full gap-2 justify-center items-center",children:[(0,a.jsx)("div",{className:"w-full h-[0px] border border-zinc-300"}),(0,a.jsx)("span",{className:"text-neutral-600 w-max text-xl font-semibold font-['Open Sans']",children:"Or"}),(0,a.jsx)("div",{className:"w-full h-[0px] border border-zinc-300"})]}),(0,a.jsxs)("div",{onClick:g,className:"flex p-4 cursor-pointer hover:bg-slate-200 justify-center items-center rounded-xl gap-4 border w-full my-5",children:[(0,a.jsx)(i.default,{width:30,height:30,alt:"google",src:"/google.png",className:"cursor-pointer hover:scale-105 transition-transform"}),(0,a.jsx)("span",{className:"text-neutral-600 text-base font-semibold font-['Inter']",children:"Log In With Google"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-base font-normal font-['Open Sans']",children:"Don't have an account?"}),(0,a.jsx)(d.default,{href:"/signup",className:"text-blue-600 text-base font-normal font-['Inter']",children:"Sign up"})]})]})]})}},1883:function(e,t,s){"use strict";s.d(t,{I8:function(){return i},Vv:function(){return c},db:function(){return o}});var a=s(5236),l=s(516),n=s(5735);let r=(0,a.ZF)({apiKey:"AIzaSyC14FhbYX7xLGJIQE9r5OnFZymgaMQqmMc",authDomain:"chatapp-1cb68.firebaseapp.com",projectId:"chatapp-1cb68",storageBucket:"chatapp-1cb68.appspot.com",messagingSenderId:"462452336783",appId:"1:462452336783:web:6cd63084ea6bede54868fa",measurementId:"G-V18Z7ZQ9XK"}),o=(0,l.N8)(r),i=(0,n.v0)(r),c=new n.hJ}},function(e){e.O(0,[481,898,591,974,971,23,744],function(){return e(e.s=5732)}),_N_E=e.O()}]);