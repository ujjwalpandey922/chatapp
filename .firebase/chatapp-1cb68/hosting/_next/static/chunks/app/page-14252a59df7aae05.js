(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6387:function(e,t,r){Promise.resolve().then(r.bind(r,8536)),Promise.resolve().then(r.bind(r,3038)),Promise.resolve().then(r.bind(r,7061))},7061:function(e,t,r){"use strict";r.d(t,{ProtectedRoute:function(){return a}});var l=r(7437),n=r(1883),s=r(5735),i=r(6463),o=r(2265);let a=e=>{let{children:t}=e,[r,a]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0),u=(0,i.useRouter)();return((0,o.useEffect)(()=>{let e=(0,s.Aj)(n.I8,e=>{a(e),d(!1)});return()=>e()},[]),(0,o.useEffect)(()=>{c||r||u.push("/login")},[c,r,u]),c)?(0,l.jsx)("h1",{children:"Loading..."}):r?(0,l.jsx)(l.Fragment,{children:t}):null}},8536:function(e,t,r){"use strict";var l=r(7437),n=r(1883),s=r(5735),i=r(516),o=r(6463);t.default=()=>{var e,t;let r=(0,o.useRouter)(),a=async()=>{console.log("LOGOUT");try{var e;(0,i.t8)((0,i.iH)(n.db,"users/"+(null===n.I8||void 0===n.I8?void 0:null===(e=n.I8.currentUser)||void 0===e?void 0:e.uid)+"/online"),!1),await (0,s.w7)(n.I8),r.push("/signup")}catch(e){console.log(e)}};return(0,l.jsxs)("div",{className:"w-full flex justify-between md:gap-8 gap-2 md:p-8 p-2 items-center text-white",children:[(0,l.jsxs)("h1",{className:"md:text-[1.5rem] text-[1rem]",children:["Hi , ",(null===n.I8||void 0===n.I8?void 0:null===(e=n.I8.currentUser)||void 0===e?void 0:e.displayName)||(null===n.I8||void 0===n.I8?void 0:null===(t=n.I8.currentUser)||void 0===t?void 0:t.email)]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"text-center md:block hidden text-zinc-100 text-sm md:text-lg font-normal font-['DM Sans'] leading-[18px]",children:"FAQs"}),(0,l.jsx)("span",{className:"text-center md:block hidden text-zinc-100 text-sm md:text-lg font-normal font-['DM Sans'] leading-[18px]",children:"How to Use"}),(0,l.jsx)("span",{className:"text-center md:block hidden text-zinc-100 text-sm md:text-lg font-normal font-['DM Sans'] leading-[18px]",children:"Support"}),(0,l.jsx)("span",{className:"text-center md:block hidden text-zinc-100 text-sm md:text-lg font-normal font-['DM Sans'] leading-[18px]",children:"Plans"}),(0,l.jsx)("button",{className:"border rounded-md px-2 p-1 hover:scale-105 transition-all hover:border-sky-600 hover:text-sky-500 text-white text-sm cursor-pointer",onClick:a,children:"Log Out"})]})]})}},3038:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var l=r(7437),n=r(2265),s=r(1883),i=r(516),o=r(1942),a=e=>{let{selectedUser:t}=e,[r,a]=(0,n.useState)([]),[c,d]=(0,n.useState)("");return((0,n.useEffect)(()=>{var e,r,l;if(t&&(null===s.I8||void 0===s.I8?void 0:null===(e=s.I8.currentUser)||void 0===e?void 0:e.uid)!==(null==t?void 0:t.uid)){let e=(0,i.iH)(s.db,"messages/".concat(null===s.I8||void 0===s.I8?void 0:null===(r=s.I8.currentUser)||void 0===r?void 0:r.uid,"/").concat(null==t?void 0:t.uid));(0,i.jM)(e,e=>{let t=e.val();console.log({data:t}),t?a(Object.keys(t).map(e=>({id:e,...t[e]}))):a([])});let n=(0,i.iH)(s.db,"messages/".concat(null==t?void 0:t.uid,"/").concat(null===s.I8||void 0===s.I8?void 0:null===(l=s.I8.currentUser)||void 0===l?void 0:l.uid));(0,i.jM)(n,e=>{let r=e.val();r&&Object.keys(r).forEach(e=>{if(!r[e].read&&r[e].delivered){var l;(0,i.Vx)((0,i.iH)(s.db,"messages/".concat(null==t?void 0:t.uid,"/").concat(null===s.I8||void 0===s.I8?void 0:null===(l=s.I8.currentUser)||void 0===l?void 0:l.uid,"/").concat(e)),{read:!0})}})})}},[t]),console.log({selectedUser:t,messages:r}),t)?(0,l.jsxs)("div",{className:"flex flex-col h-full w-full p-4",children:[(0,l.jsxs)("div",{className:"flex flex-col flex-1 p-2 bg-slate-900 rounded-lg overflow-y-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white text-center pb-4 pt-2 border-b-2",children:null==t?void 0:t.email}),null==r?void 0:r.filter(e=>e.content).map(e=>{var t;return(0,l.jsxs)("div",{className:"p-2 my-2 w-max rounded-lg border flex gap-2 ".concat(e.sender===(null===(t=s.I8.currentUser)||void 0===t?void 0:t.uid)?"ms-auto justify-end text-right bg-lime-300 ":"me-auto justify-start text-left bg-sky-300"),children:[(0,l.jsx)("p",{children:e.content}),(0,l.jsx)("div",{className:"flex items-center space-x-2 text-sm",children:e.delivered?e.read?(0,l.jsx)(o.W_7,{className:"text-blue-500"}):(0,l.jsx)(o.W_7,{}):(0,l.jsx)(o.l_A,{})})]},e.id)})]}),(0,l.jsxs)("div",{className:"flex mt-4",children:[(0,l.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value)},placeholder:"Enter message!!!!!!!!!",className:"flex-1 p-2 px-4 rounded-l-lg outline-none bg-slate-900 text-white"}),(0,l.jsx)("button",{onClick:()=>{if(!t||!s.I8.currentUser)return;let e=(0,i.VF)((0,i.iH)(s.db,"messages/".concat(s.I8.currentUser.uid,"/").concat(t.uid)));(0,i.t8)(e,{sender:s.I8.currentUser.uid,content:c,timestamp:Date.now(),delivered:!1,read:!1});let r=(0,i.VF)((0,i.iH)(s.db,"messages/".concat(t.uid,"/").concat(s.I8.currentUser.uid)));(0,i.t8)(r,{sender:s.I8.currentUser.uid,content:c,timestamp:Date.now(),delivered:!1,read:!1}),d("")},className:"p-2 bg-blue-900 text-white rounded-r-lg",children:"Send"})]})]}):(0,l.jsx)("h1",{className:"text-center w-full text-3xl font-bold text-white",children:"Select any user online to start chat"})},c=e=>{let{users:t,selectedUser:r,setSelectedUser:n}=e,i=null==t?void 0:t.filter(e=>{var t;return e.uid!==(null===s.I8||void 0===s.I8?void 0:null===(t=s.I8.currentUser)||void 0===t?void 0:t.uid)});return(0,l.jsxs)("div",{className:" w-full bg-slate-900 md:w-72 p-4 rounded-xl max-h-[75vh]  ",children:[(0,l.jsx)("h1",{className:"text-lime-300 font-semibold text-center text-lg",children:"Users List"}),(0,l.jsx)("div",{className:"flex flex-col gap-4 p-4 h-[90%] w-full overflow-y-auto",children:null==i?void 0:i.map(e=>{var t;return(0,l.jsx)("div",{className:"rounded-md bg-sky-100 hover:scale-105 cursor-pointer px-4 py-2 flex  transition-all  text-black items-center  border w-full gap-1 lg:gap-4 justify-between \n              ".concat(e.uid==(null==r?void 0:r.uid)?" bg-sky-600 border-black shadow-lg scale-105  cursor-default":"","\n              "),onClick:()=>n(e),children:(0,l.jsxs)("div",{className:"w-full flex justify-start items-center gap-2 ",children:[(0,l.jsx)("span",{className:"rounded-full min-w-10 h-10 grid place-items-center bg-black text-white font-bold text-xl ",children:null==e?void 0:null===(t=e.email)||void 0===t?void 0:t.slice(0,1).toUpperCase()}),(0,l.jsxs)("div",{className:"flex flex-col truncate",children:[(0,l.jsxs)("h2",{className:"truncate font-medium  text-lg text-left",children:[null==e?void 0:e.email," "]}),(0,l.jsx)("p",{className:"text-sm font-semibold ".concat((null==e?void 0:e.online)?"text-lime-500":"text-sky-900"," "),children:(null==e?void 0:e.online)?"(Online)":"(Offline)"})]})]})},null==e?void 0:e.uid)})})]})},d=()=>{let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=(0,i.iH)(s.db,"users/");(0,i.jM)(e,e=>{var r;let l=e.val();t(null===(r=Object.keys(l))||void 0===r?void 0:r.map(e=>({uid:e,...l[e]})))})},[]),(0,l.jsx)("div",{className:"flex-1  flex h-full w-full",children:(0,l.jsxs)("div",{className:"flex flex-1 md:flex-row  w-full flex-col-reverse gap-4 justify-start",children:[(0,l.jsx)(c,{users:e,selectedUser:r,setSelectedUser:o}),(0,l.jsx)(a,{selectedUser:r})]})})}},1883:function(e,t,r){"use strict";r.d(t,{I8:function(){return a},Vv:function(){return c},db:function(){return o}});var l=r(5236),n=r(516),s=r(5735);let i=(0,l.ZF)({apiKey:"AIzaSyC14FhbYX7xLGJIQE9r5OnFZymgaMQqmMc",authDomain:"chatapp-1cb68.firebaseapp.com",projectId:"chatapp-1cb68",storageBucket:"chatapp-1cb68.appspot.com",messagingSenderId:"462452336783",appId:"1:462452336783:web:6cd63084ea6bede54868fa",measurementId:"G-V18Z7ZQ9XK"}),o=(0,n.N8)(i),a=(0,s.v0)(i),c=new s.hJ},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var l=r(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=l.createContext&&l.createContext(n),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,l)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var l,n;l=t,n=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>l.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>l.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:n,size:s,title:a}=e,d=function(e,t){if(null==e)return{};var r,l,n=function(e,t){if(null==e)return{};var r={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;r[l]=e[l]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)r=s[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,i),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),l.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&l.createElement("title",null,a),e.children)};return void 0!==s?l.createElement(s.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[481,898,699,591,971,23,744],function(){return e(e.s=6387)}),_N_E=e.O()}]);